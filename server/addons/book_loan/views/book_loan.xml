<odoo>
  <data>
    <!-- tree -->
    <record id='book_loan_tree' model='ir.ui.view'>
      <field name='name'>Book Loan</field>
      <field name='model'>book.loan</field>
      <field name='arch' type='xml'>
        <tree string='book loan tree'>
          <field name='name' optional="show"/>
          <field name='contact_name' optional="show"/>
          <field name='book_id' optional="show"/>
          <field name='loan_date' optional="show"/>
          <field name='loan_term' optional="hide"/>
          <field name='return_date' optional="hide"/>
          <field name='amount' optional="hide"/>
          <field name='state' optional="show"
          statusbar_visible="dipinjam,dikembalikan,hilang" 
          decoration-info="state=='dipinjam'"
          decoration-success="state=='dikembalikan'"
          decoration-danger="state=='hilang'"
          widget="badge"
          />
        </tree>
      </field>
    </record>

    <!-- action -->
    <record id='book_loan_action' model='ir.actions.act_window'>
      <field name='name'>Book Loan</field>
      <field name='res_model'>book.loan</field>
      <field name='view_mode'>tree,form,kanban</field>
    </record>

    <!-- form -->
    <record id='book_loan_form' model='ir.ui.view'>
      <field name='name'>Loan Form</field>
      <field name='model'>book.loan</field>
      <field name='arch' type='xml'>
        <form>
          <header>
            <!-- status bar -->
            <field 
            name="state"
            widget="statusbar"
            statusbar_visible="dipinjam,dikembalikan,hilang"
            />
          </header>
          <sheet>
            <group>
              <group>
                <field name='name'/>
                <field name='book_id'/>
                <field name='loan_date'/>
                <field name='amount'/>
              </group>
              <group>
                <field name='contact_name'/>
                <field name='loan_term'/>
                <field name='return_date'/>
                <field name='state'/>
              </group>
            </group>

            <footer>
              <button
              name="action_return"
              type="object"
              string="Dikembalikan"
              state="dikembalikan"
              class="oe_highlight"
              />
              <button
              name="action_borrow"
              type="object"
              string="Dipinjam"
              state="dipinjam"
              class="oe_highlight"
              />
              <button
              name="action_lost"
              type="object"
              string="Hilang"
              state="hilang"
              class="oe_highlight"
              />
              <button 
              string="Cancel" 
              class="oe_link" 
              special="cancel"
              />
            </footer>
          </sheet>
        </form>
      </field>
    </record>

    <!-- kanban -->
    <record id='book_loan_kanban_view' model='ir.ui.view'>
      <field name='name'>Kanban</field>
      <field name='model'>book.loan</field>
      <field name='arch' type='xml'>
        <kanban class='o_kanban_small_column'>
          <field name='name' />
          <field name='contact_name' />
          <field name='book_id' />
          <field name='state' />

          <templates>
            <t t-name='kanban-box'>
              <div t-attf-class='oe_kanban_global_click'>
                <div class='oe_kanban_content'>
                  
                  <div class='o_kanban_record_top mb16'>
                    <div class='o_kanban_record_headings mt4'>
                      <strong class='o_kanban_record_title'>
                        <span><field name='name' /></span>
                      </strong>
                    </div>
                    <div>
                      <strong>
                        <span><field name="book_id"/></span>
                      </strong>
                    </div>
                  </div>

                  <div class='o_kanban_record_bottom'>
                    <div class='oe_kanban_bottom_left'>
                      <small>
                          <span><field name="contact_name"/></span>
                      </small>
                    </div>
                    <div class='oe_kanban_bottom_right'>
                      <span>
                        <field 
                          name="state"
                          statusbar_visible="dipinjam,dikembalikan,hilang" 
                          decoration-info="state=='dipinjam'"
                          decoration-success="state=='dikembalikan'"
                          decoration-danger="state=='hilang'"
                          widget="badge"
                        />
                      </span>
                    </div>

                  </div>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

  </data>
</odoo>
